const fs = require('fs');
const replace = require('replace-in-file');

//const skip = ['012113114002', '012113114003', '012113114004', '012113114005', '012113114006', '012113114007', '012113114008', '012113114009', '012113114010', '012113114011', '012113114012', '012113114013', '012113114014', '012113114015', '012113114016', '012113114017', '012113114018', '012113114019', '012113114020', '012113114021', '012113114022', '012113114023', '012113114024', '012113114025', '012113114026', '012113114027', '037113114001', '037113114002', '037113114003', '037113114004', '037113114005', '037113114006', '037113114007', '037113114008', '037113114009', '037113114010', '037113114011', '037113114012', '037113114013', '051113114001', '051113114002', '051113114003', '051113114004', '051113114007'];

// get the ids that need to be updated
// const ds114 = JSON.parse(fs.readFileSync('../../build/static/elections/2014.json')).elections
//   .map(e => e.id.slice(0, 12))
//   .filter(d => !skip.includes(d));
// console.log(JSON.stringify(ds114));

const toupdate = ["022113114001","022113114002","022113114003","022113114004","022113114005","022113114006","023113114001","023113114002","024113114001","024113114002","024113114003","024113114004","024113114005","024113114006","024113114007","024113114008","025113114001","025113114002","025113114003","025113114004","025113114005","025113114006","025113114007","025113114008","025113114009","026113114001","026113114002","026113114003","026113114004","026113114005","026113114006","026113114007","026113114008","026113114009","026113114010","026113114011","026113114012","026113114013","026113114014","027113114001","027113114002","027113114003","027113114004","027113114005","027113114006","027113114007","027113114008","028113114001","028113114002","028113114003","028113114004","029113114001","029113114002","029113114003","029113114004","029113114005","029113114006","029113114007","029113114008","030103114000","031113114001","031113114002","031113114003","032113114001","032113114002","032113114003","032113114004","033113114001","033113114002","034113114001","034113114002","034113114003","034113114004","034113114005","034113114006","034113114007","034113114008","034113114009","034113114010","034113114011","034113114012","040113114001","040113114002","040113114003","040113114004","040113114005","041113114001","041113114002","041113114003","041113114004","041113114005","042113114001","042113114002","042113114003","042113114004","042113114005","042113114006","042113114007","042113114008","042113114009","042113114010","042113114011","042113114012","042113114013","042113114014","042113114015","042113114016","042113114017","042113114018","044113114001","044113114002","045113114001","045113114002","045113114003","045113114004","045113114005","045113114006","045113114007","046108114000","047113114001","047113114002","047113114003","047113114004","047113114005","047113114006","047113114007","047113114008","047113114009","048113114001","048113114002","048113114003","048113114004","048113114005","048113114006","048113114007","048113114008","048113114009","048113114010","048113114011","048113114012","048113114013","048113114014","048113114015","048113114016","048113114017","048113114018","048113114019","048113114020","048113114021","048113114022","048113114023","048113114024","048113114025","048113114026","048113114027","048113114028","048113114029","048113114030","048113114031","048113114032","048113114033","048113114034","048113114035","048113114036","036113114001","036113114002","036113114003","036113114004","036113114005","036113114006","036113114007","036113114008","036113114009","036113114010","036113114011","036113114012","036113114013","036113114014","036113114015","036113114016","036113114017","036113114018","036113114019","036113114020","036113114021","036113114022","036113114023","036113114024","036113114025","036113114026","036113114027","001113114001","001113114002","001113114003","001113114004","001113114005","001113114006","001113114007","004113114001","004113114002","004113114003","004113114004","004113114005","004113114006","004113114007","004113114008","004113114009","005113114001","005113114002","005113114003","005113114004","006113114001","006113114002","006113114003","006113114004","006113114005","006113114006","006113114007","006113114008","006113114009","006113114010","006113114011","006113114012","006113114013","006113114014","006113114015","006113114016","006113114017","006113114018","006113114019","006113114020","006113114021","006113114022","006113114023","006113114024","006113114025","006113114026","006113114027","006113114028","006113114029","006113114030","006113114031","006113114032","006113114033","006113114034","006113114035","006113114036","006113114037","006113114038","006113114039","006113114040","006113114041","006113114042","006113114043","006113114044","006113114045","006113114046","006113114047","006113114048","006113114049","006113114050","006113114051","006113114052","006113114053","008113114001","008113114002","008113114003","008113114004","008113114005","008113114006","008113114007","009113114001","009113114002","009113114003","009113114004","009113114005","010103114000","012113114001","013113114001","013113114002","013113114003","013113114004","013113114005","013113114006","013113114007","013113114008","013113114009","013113114010","013113114011","013113114012","013113114013","013113114014","015113114001","015113114002","016113114001","016113114002","017113114001","017113114002","017113114003","017113114004","017113114005","017113114006","017113114007","017113114008","017113114009","017113114010","017113114011","017113114012","017113114013","017113114014","017113114015","017113114016","017113114017","017113114018","018113114001","018113114002","018113114003","018113114004","018113114005","018113114006","018113114007","018113114008","018113114009","019113114001","019113114002","019113114003","019113114004","020113114001","020113114002","020113114003","020113114004","021113114001","021113114002","021113114003","021113114004","021113114005","021113114006","035113114001","035113114002","035113114003","038103114000","039113114001","039113114002","039113114003","039113114004","039113114005","039113114006","039113114007","039113114008","039113114009","039113114010","039113114011","039113114012","039113114013","039113114014","039113114015","039113114016","049113114001","049113114002","049113114003","049113114004","050103114000","051113114005","051113114006","051113114008","051113114009","051113114010","051113114011","053113114001","053113114002","053113114003","053113114004","053113114005","053113114006","053113114007","053113114008","053113114009","053113114010","054113114001","054113114002","054113114003","055113114001","055113114002","055113114003","055113114004","055113114005","055113114006","055113114007","055113114008","056103114000","002103114000"];

toupdate.forEach((oldId) => {
  // make the new updated id
  const newId = `${oldId.slice(0, 8)}5${oldId.slice(9)}`;

  // replace them one by one
  const options = {
    //files: '../../build/static/elections/*.json',
    files: ['../elections/data/elections.json', '../dorlings/data/elections.json'],
    from: oldId,
    to: newId
  };
  try {
    const changes = replace.sync(options);
    console.log('Modified files:', changes.join(', '));
  } catch (error) {
    console.error('Error occurred:', error);
  }

  // make update statements for carto
  //console.log(`update districts_copy_1 set id = '${newId}' where id = '${oldId}';`);
});
